{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/tema/projects/sana-landing-ts/blog/src/contexts/photo.tsx\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { createContext } from \"react\";\nimport React from \"react\";\n\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nvar noop = function noop() {};\n\nvar defaultState = {\n  previousQueries: [],\n  favoritePhotos: new Map()\n};\n\nvar defaultProps = _objectSpread(_objectSpread({}, defaultState), {}, {\n  addQuery: noop,\n  addFavoritePhoto: noop,\n  removeFavoritePhoto: noop,\n  isPhotoFavorite: function isPhotoFavorite() {\n    return false;\n  }\n});\n\nvar PhotoContext = /*#__PURE__*/createContext(defaultProps);\n\nvar PhotoContextWrapper = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(PhotoContextWrapper, _React$PureComponent);\n\n  var _super = _createSuper(PhotoContextWrapper);\n\n  function PhotoContextWrapper() {\n    var _this;\n\n    _classCallCheck(this, PhotoContextWrapper);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", defaultState);\n\n    _defineProperty(_assertThisInitialized(_this), \"addQuery\", function (query) {\n      var prevQueries = _toConsumableArray(_this.state.previousQueries);\n\n      prevQueries.push(query);\n\n      _this.setState({\n        previousQueries: prevQueries\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"addFavoritePhoto\", function (photo) {\n      var favoritePhotos = new Map(_this.state.favoritePhotos);\n      favoritePhotos.set(photo.id, photo);\n\n      _this.setState({\n        favoritePhotos: favoritePhotos\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"removeFavoritePhoto\", function (photo) {\n      var favoritePhotos = new Map(_this.state.favoritePhotos);\n      favoritePhotos[\"delete\"](photo.id);\n\n      _this.setState({\n        favoritePhotos: favoritePhotos\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isPhotoFavorite\", function (photo) {\n      return _this.state.favoritePhotos.has(photo.id);\n    });\n\n    return _this;\n  }\n\n  _createClass(PhotoContextWrapper, [{\n    key: \"render\",\n    value: function render() {\n      return __jsx(PhotoContext.Provider, {\n        value: this.photoContextProps,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 7\n        }\n      }, this.props.children);\n    }\n  }, {\n    key: \"photoContextProps\",\n    get: function get() {\n      return _objectSpread(_objectSpread({}, this.state), {}, {\n        addQuery: this.addQuery,\n        addFavoritePhoto: this.addFavoritePhoto,\n        removeFavoritePhoto: this.removeFavoritePhoto,\n        isPhotoFavorite: this.isPhotoFavorite\n      });\n    }\n  }]);\n\n  return PhotoContextWrapper;\n}(React.PureComponent);\n\nexport { PhotoContext, PhotoContextWrapper, defaultState };","map":{"version":3,"sources":["/home/tema/projects/sana-landing-ts/blog/src/contexts/photo.tsx"],"names":["createContext","React","noop","defaultState","previousQueries","favoritePhotos","Map","defaultProps","addQuery","addFavoritePhoto","removeFavoritePhoto","isPhotoFavorite","PhotoContext","PhotoContextWrapper","query","prevQueries","state","push","setState","photo","set","id","has","photoContextProps","props","children","PureComponent"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,SAASA,aAAT,QAA8B,OAA9B;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAGA;AACA,IAAMC,IAAI,GAAG,SAAPA,IAAO,GAAY,CAAE,CAA3B;;AAcA,IAAMC,YAA+B,GAAG;AACtCC,EAAAA,eAAe,EAAE,EADqB;AAEtCC,EAAAA,cAAc,EAAE,IAAIC,GAAJ;AAFsB,CAAxC;;AAKA,IAAMC,YAA+B,mCAChCJ,YADgC;AAEnCK,EAAAA,QAAQ,EAAEN,IAFyB;AAGnCO,EAAAA,gBAAgB,EAAEP,IAHiB;AAInCQ,EAAAA,mBAAmB,EAAER,IAJc;AAKnCS,EAAAA,eAAe,EAAE;AAAA,WAAM,KAAN;AAAA;AALkB,EAArC;;AAQA,IAAMC,YAAY,gBAAGZ,aAAa,CAAoBO,YAApB,CAAlC;;IAEMM,mB;;;;;;;;;;;;;;;;4DACuBV,Y;;+DAGhB,UAACW,KAAD,EAAmB;AAC5B,UAAMC,WAAW,sBAAO,MAAKC,KAAL,CAAWZ,eAAlB,CAAjB;;AACAW,MAAAA,WAAW,CAACE,IAAZ,CAAiBH,KAAjB;;AAEA,YAAKI,QAAL,CAAc;AAAEd,QAAAA,eAAe,EAAEW;AAAnB,OAAd;AACD,K;;uEAEkB,UAACI,KAAD,EAAmC;AACpD,UAAMd,cAAc,GAAG,IAAIC,GAAJ,CAAQ,MAAKU,KAAL,CAAWX,cAAnB,CAAvB;AAEAA,MAAAA,cAAc,CAACe,GAAf,CAAmBD,KAAK,CAACE,EAAzB,EAA6BF,KAA7B;;AAEA,YAAKD,QAAL,CAAc;AAAEb,QAAAA,cAAc,EAAdA;AAAF,OAAd;AACD,K;;0EAEqB,UAACc,KAAD,EAAoC;AACxD,UAAMd,cAAc,GAAG,IAAIC,GAAJ,CAAQ,MAAKU,KAAL,CAAWX,cAAnB,CAAvB;AAEAA,MAAAA,cAAc,UAAd,CAAsBc,KAAK,CAACE,EAA5B;;AAEA,YAAKH,QAAL,CAAc;AAAEb,QAAAA,cAAc,EAAdA;AAAF,OAAd;AACD,K;;sEAEiB,UAACc,KAAD,EAAuC;AACvD,aAAO,MAAKH,KAAL,CAAWX,cAAX,CAA0BiB,GAA1B,CAA8BH,KAAK,CAACE,EAApC,CAAP;AACD,K;;;;;;;6BAYQ;AACP,aACE,MAAC,YAAD,CAAc,QAAd;AAAuB,QAAA,KAAK,EAAE,KAAKE,iBAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAKC,KAAL,CAAWC,QADd,CADF;AAKD;;;wBAhB0C;AACzC,6CACK,KAAKT,KADV;AAEER,QAAAA,QAAQ,EAAE,KAAKA,QAFjB;AAGEC,QAAAA,gBAAgB,EAAE,KAAKA,gBAHzB;AAIEC,QAAAA,mBAAmB,EAAE,KAAKA,mBAJ5B;AAKEC,QAAAA,eAAe,EAAE,KAAKA;AALxB;AAOD;;;;EAvC+BV,KAAK,CAACyB,a;;AAkDxC,SAASd,YAAT,EAAuBC,mBAAvB,EAA4CV,YAA5C","sourcesContent":["import { createContext } from \"react\";\nimport React from \"react\";\nimport { UnsplashApiPhoto } from \"../types/unsplash\";\n\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nconst noop = (): void => {};\n\ninterface PhotoContextState {\n  previousQueries: Array<string>;\n  favoritePhotos: Map<string, UnsplashApiPhoto>;\n}\n\ninterface PhotoContextProps extends PhotoContextState {\n  addQuery: (query: string) => void;\n  addFavoritePhoto: (photo: UnsplashApiPhoto) => void;\n  removeFavoritePhoto: (photo: UnsplashApiPhoto) => void;\n  isPhotoFavorite: (photo: UnsplashApiPhoto) => boolean;\n}\n\nconst defaultState: PhotoContextState = {\n  previousQueries: [],\n  favoritePhotos: new Map()\n};\n\nconst defaultProps: PhotoContextProps = {\n  ...defaultState,\n  addQuery: noop,\n  addFavoritePhoto: noop,\n  removeFavoritePhoto: noop,\n  isPhotoFavorite: () => false\n};\n\nconst PhotoContext = createContext<PhotoContextProps>(defaultProps);\n\nclass PhotoContextWrapper extends React.PureComponent {\n  state: PhotoContextState = defaultState;\n\n  // eslint-disable-next-line @typescript-eslint/explicit-function-return-type\n  addQuery = (query: string) => {\n    const prevQueries = [...this.state.previousQueries];\n    prevQueries.push(query);\n\n    this.setState({ previousQueries: prevQueries });\n  };\n\n  addFavoritePhoto = (photo: UnsplashApiPhoto): void => {\n    const favoritePhotos = new Map(this.state.favoritePhotos);\n\n    favoritePhotos.set(photo.id, photo);\n\n    this.setState({ favoritePhotos });\n  };\n\n  removeFavoritePhoto = (photo: UnsplashApiPhoto): void  => {\n    const favoritePhotos = new Map(this.state.favoritePhotos);\n\n    favoritePhotos.delete(photo.id);\n\n    this.setState({ favoritePhotos });\n  };\n\n  isPhotoFavorite = (photo: UnsplashApiPhoto): boolean  => {\n    return this.state.favoritePhotos.has(photo.id);\n  };\n\n  get photoContextProps(): PhotoContextProps {\n    return {\n      ...this.state,\n      addQuery: this.addQuery,\n      addFavoritePhoto: this.addFavoritePhoto,\n      removeFavoritePhoto: this.removeFavoritePhoto,\n      isPhotoFavorite: this.isPhotoFavorite\n    };\n  }\n\n  render() {\n    return (\n      <PhotoContext.Provider value={this.photoContextProps}>\n        {this.props.children}\n      </PhotoContext.Provider>\n    );\n  }\n}\n\nexport { PhotoContext, PhotoContextWrapper, defaultState };\n"]},"metadata":{},"sourceType":"module"}