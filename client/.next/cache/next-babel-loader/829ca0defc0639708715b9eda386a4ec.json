{"ast":null,"code":"var _jsxFileName = \"/home/tema/projects/sana-landing-ts/blog/src/components/video-thumbnail/index.tsx\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { PureComponent } from \"react\";\nimport style from \"./style.module.css\";\nimport PropTypes from \"prop-types\";\nimport cn from \"classnames\";\n\nclass VideoThumbnail extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"state\", {\n      isLoading: true\n    });\n\n    _defineProperty(this, \"hasLoaded\", () => {\n      clearInterval(this.timer);\n      this.setState({\n        isLoading: false\n      });\n    });\n\n    _defineProperty(this, \"checkReady\", () => {\n      const vid = this.video.current;\n\n      if (vid) {\n        if (vid.readyState > 3) {\n          this.hasLoaded();\n        }\n      }\n    });\n\n    _defineProperty(this, \"onMouseEnter\", () => {\n      const vid = this.video.current;\n\n      if (vid) {\n        vid.play();\n      }\n    });\n\n    _defineProperty(this, \"onMouseLeave\", () => {\n      const vid = this.video.current;\n\n      if (vid) {\n        vid.pause();\n      }\n    });\n\n    _defineProperty(this, \"onLoad\", () => {\n      this.hasLoaded();\n    });\n\n    this.video = /*#__PURE__*/React.createRef();\n    this.checkReady();\n    this.timer = setInterval(() => {\n      this.checkReady();\n    }, 700);\n  }\n\n  render() {\n    const {\n      imgUrl,\n      webmUrl,\n      name\n    } = this.props;\n    const {\n      isLoading\n    } = this.state;\n    const thumbClass = style.thumbnail;\n    const videoClass = cn(\"img\", {\n      hide: isLoading\n    });\n    return __jsx(\"span\", {\n      className: thumbClass,\n      role: \"link\",\n      onMouseEnter: this.onMouseEnter,\n      onMouseLeave: this.onMouseLeave,\n      tabIndex: 0,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 7\n      }\n    }, __jsx(\"video\", {\n      ref: this.video,\n      onError: this.hasLoaded\n      /* Костыль для того чтоб на айфоне лоадер отрабатывал нормально. Нужно пофиксить в дальнейшем*/\n      ,\n      onCanPlayThrough: this.onLoad,\n      onCanPlay: this.onLoad,\n      loop: true,\n      poster: imgUrl,\n      muted: true,\n      className: videoClass,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }\n    }, __jsx(\"source\", {\n      src: webmUrl,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }\n    }), __jsx(\"source\", {\n      src: imgUrl,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }\n    })), __jsx(\"div\", {\n      className: \"label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }\n    }, name));\n  }\n\n}\n\n_defineProperty(VideoThumbnail, \"propTypes\", {\n  id: PropTypes.number,\n  imgUrl: PropTypes.string,\n  webmUrl: PropTypes.string,\n  name: PropTypes.string,\n  defaultActive: PropTypes.bool\n});\n\nexport default VideoThumbnail;","map":{"version":3,"sources":["/home/tema/projects/sana-landing-ts/blog/src/components/video-thumbnail/index.tsx"],"names":["React","PureComponent","style","PropTypes","cn","VideoThumbnail","constructor","props","isLoading","clearInterval","timer","setState","vid","video","current","readyState","hasLoaded","play","pause","createRef","checkReady","setInterval","render","imgUrl","webmUrl","name","state","thumbClass","thumbnail","videoClass","hide","onMouseEnter","onMouseLeave","onLoad","id","number","string","defaultActive","bool"],"mappings":"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","sourcesContent":["import React, { PureComponent } from \"react\"\nimport style from \"./style.module.css\"\nimport PropTypes from \"prop-types\"\nimport cn from \"classnames\"\n\nclass VideoThumbnail extends PureComponent {\n  constructor(props) {\n    super(props)\n\n    this.video = React.createRef()\n    this.checkReady()\n    this.timer = setInterval(() => {\n      this.checkReady()\n    }, 700)\n  }\n\n  static propTypes = {\n    id: PropTypes.number,\n    imgUrl: PropTypes.string,\n    webmUrl: PropTypes.string,\n    name: PropTypes.string,\n    defaultActive: PropTypes.bool\n  }\n  state = {\n    isLoading: true\n  }\n\n  hasLoaded = () => {\n    clearInterval(this.timer)\n    this.setState({ isLoading: false })\n  }\n\n  checkReady = () => {\n    const vid = this.video.current\n    if (vid) {\n      if (vid.readyState > 3) {\n        this.hasLoaded()\n      }\n    }\n  }\n\n  onMouseEnter = () => {\n    const vid = this.video.current\n    if (vid) {\n      vid.play()\n    }\n  }\n\n  onMouseLeave = () => {\n    const vid = this.video.current\n    if (vid) {\n      vid.pause()\n    }\n  }\n\n  onLoad = () => {\n    this.hasLoaded()\n  }\n\n  render() {\n    const { imgUrl, webmUrl, name } = this.props\n    const { isLoading } = this.state\n    const thumbClass = style.thumbnail\n    const videoClass = cn(\"img\", { hide: isLoading })\n\n    return (\n      <span\n        className={thumbClass}\n        role=\"link\"\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n        tabIndex={0}\n      >\n        <video\n          ref={this.video}\n          onError={\n            this.hasLoaded\n          } /* Костыль для того чтоб на айфоне лоадер отрабатывал нормально. Нужно пофиксить в дальнейшем*/\n          onCanPlayThrough={this.onLoad}\n          onCanPlay={this.onLoad}\n          loop={true}\n          poster={imgUrl}\n          muted={true}\n          className={videoClass}\n        >\n          <source src={webmUrl} />\n          <source src={imgUrl} />\n          {/* Костыль для того чтоб на айфоне лоадер отрабатывал нормально. Нужно пофиксить в дальнейшем*/}\n        </video>\n        <div className=\"label\">{name}</div>\n      </span>\n    )\n  }\n}\n\nexport default VideoThumbnail\n"]},"metadata":{},"sourceType":"module"}